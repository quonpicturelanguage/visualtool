<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>UV visit</title>
  <!-- <link rel="shortcut icon" type="image/png" href="./img/ab2.png"> -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link href="./vue.themes.docsify.4.5.5.css" rel="stylesheet">
</head>
<body>
  <div id="app"></div>
  <script>
    window.$docsify = {
      homepage: 'index.md',
      loadSidebar: true,
      name: 'Quon Visual Tool',
      // repo: 'https://git.coding.net/zhaouv/tree.git',
      // basepath: '/docs/',
      
        // Search Support
      search: {
        maxAge: 60000, // 过期时间，单位毫秒，默认一天
        paths: 'auto',
        placeholder: {
          // '/en/': 'Search',
          '/': 'search',
        },
        noData: {
          // '/en/': 'No Results',
          '/': 'No Results',
        },
      },

       // load sidebar from _sidebar.md
      loadSidebar: 'sidebar.md',
      maxLevel: 4,
      subMaxLevel: 3,
      autoHeader: true,
      auto2top: true,
      mergeNavbar: true,
      formatUpdated: '{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}',
      plugins: [
        function(hook){
          let renderCheckbox=function(str){
            return str.replace(/√/g,'<input type="checkbox" disabled checked style="margin:0 0 0.1em 0.45em;vertical-align: middle;">').replace(/×/g,'<input type="checkbox" disabled style="margin:0 0 0.1em 0.45em;vertical-align: middle;">')
          }
          let replaceFunction = function(all, code){
            const startsWith = all.startsWith('$$')
            const endsWith = all.endsWith('$$')
            // single '$' at beginning and end: small
            // double $$ at beginning and end: large 
            if((startsWith && endsWith) || (!startsWith && !endsWith)) {
              return katex.renderToString(code, {displayMode: startsWith})
            } else {
              console.warn('Error: mismatching dollar signs ($) in math expression, ignoring math expression')
              return all
            }
          }
          let convertNode=function(x){
            x.innerHTML = renderCheckbox(x.innerHTML.replace(/\$\$?([\s\S]*?)\$\$?/g, replaceFunction))
          }
          hook.beforeEach(function(content){
            return renderCheckbox(content.replace(/\$\$([\s\S]*?)\$\$/g, replaceFunction).replace(/\$(.*?)\$/g, replaceFunction))
          })
          // hook.afterEach(function(content){
          //   const doc = new DOMParser().parseFromString(convertNode, 'text/html')
          //   Array.from(doc.querySelectorAll('p')).forEach(convertNode)
          //   return doc.body.innerHTML
          // })
          hook.doneEach(function(){
            Array.from(document.querySelectorAll('.sidebar li')).forEach(convertNode)
          })
        }
      ]
    }
    // if (typeof navigator.serviceWorker !== 'undefined') {
    //     navigator.serviceWorker.register('serviceWorker.js')
    // }
  </script>
  <script src="./docsify.4.5.5.min.js"></script>
  <script src="./katex.min.js"></script>
  <link href="./katex.min.css" rel="stylesheet">
  <script src="./search.docsify.4.5.5.min.js"></script>
</body>
</html>
